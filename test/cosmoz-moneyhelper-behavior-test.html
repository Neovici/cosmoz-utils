<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
	<title>cosmoz-moneyhelper-behavior test</title>

	<script src="../../webcomponentsjs/webcomponents-lite.js"></script>
	<script src="../../web-component-tester/browser.js"></script>
	<script src="../../test-fixture/test-fixture-mocha.js"></script>

	<link rel="import" href="../../test-fixture/test-fixture.html">
	<link rel="import" href="../../iron-test-helpers/iron-test-helpers.html">

	<link rel="import" href="./fixtures/cosmoz-moneyhelper-behavior.html">
</head>
<body>
	<test-fixture id="cosmoz-moneyhelper-behavior-fixture">
		<template>
			<test-cosmoz-moneyhelper-behavior></test-cosmoz-moneyhelper-behavior>
		</template>
	</test-fixture>
	<script type="text/javascript">
	(function () {
		'use strict';

		suite('cosmoz-moneyhelper-behavior', function () {
			var moneyHelper,
				amount = 2200200.3333333333;

			setup(function () {
				moneyHelper = fixture('cosmoz-moneyhelper-behavior-fixture');
			});

			test('amountEquals ', function (done) {
				assert.equal(moneyHelper.amountEquals(null, null), false);
				assert.equal(moneyHelper.amountEquals(null, false), false);
				assert.equal(moneyHelper.amountEquals(100, 100), false);
				assert.equal(moneyHelper.amountEquals({amount: amount}, {amount: amount}), false);
				assert.equal(moneyHelper.amountEquals({amount: amount}, {amount: amount, currency: 'USD'}), false);
				assert.equal(moneyHelper.amountEquals({amount: null, currency: 'USD'}, {amount: null, currency: 'USD'}), false);
				assert.equal(moneyHelper.amountEquals({amount: amount, currency: null}, {amount: amount, currency: null}), false);
				assert.equal(moneyHelper.amountEquals({amount: amount, currency: 'SEK'}, {amount: amount}), false);
				assert.equal(moneyHelper.amountEquals({amount: amount, currency: 'EUR'}, {amount: -amount, currency: 'EUR'}), false);
				assert.equal(moneyHelper.amountEquals({amount: amount, currency: 'EUR'}, {amount: amount, currency: 'EUR'}), true);
				assert.equal(moneyHelper.amountEquals({amount: 1.100, currency: 'EUR'}, {amount: 1.1001, currency: 'EUR'}, 2), true);
				assert.equal(moneyHelper.amountEquals({amount: amount, currency: 'EUR'}, {amount: amount, currency: 'EUR'}, 4), true);
				done();
			});

			test('isAmount ', function (done) {
				assert.equal(moneyHelper.isAmount(null), false);
				assert.equal(moneyHelper.isAmount(false), false);
				assert.equal(moneyHelper.isAmount(100), false);
				assert.equal(moneyHelper.isAmount({amount: amount}), false);
				assert.equal(moneyHelper.isAmount({currency: 'EUR'}), false);
				assert.equal(moneyHelper.isAmount({amount: amount, currency: 'EUR'}), true);
				assert.equal(moneyHelper.isAmount({amount: amount.toString(), currency: 'EUR'}), false);
				assert.equal(moneyHelper.isAmount({amount: null, currency: 'USD'}), false);
				assert.equal(moneyHelper.isAmount({amount: amount, currency: null}), false);
				done();
			});

			test('renderAmount ', function (done) {
				assert.equal(moneyHelper.renderAmount({amount: amount}), '$2,200,200.33');
				assert.equal(moneyHelper.renderAmount({amount: amount, currency: 'USD'}), '$ 2,200,200.33');
				assert.equal(moneyHelper.renderAmount({amount: amount, currency: 'EUR'}), 'â‚¬ 2.200.200,33');
				assert.equal(moneyHelper.renderAmount({amount: amount, currency: 'SEK'}), '2 200 200,33 kr');
				assert.equal(moneyHelper.renderAmount({amount: amount, currency: 'NOK'}), '2 200 200,33 kr');
				assert.equal(moneyHelper.unformatRenderedAmount('2.200.200,33', ','), 2200200.33);
				done();
			});
		});
	})();
	</script>
</body></html>
