<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

	<title>cosmoz-tabs demo</title>

	<script src="../../webcomponentsjs/webcomponents-lite.js"></script>

	<link rel="import" href="../../iron-demo-helpers/demo-pages-shared-styles.html" />
	<link rel="import" href="../../iron-demo-helpers/demo-snippet.html" />
	<link rel="import" href="../../iron-flex-layout/iron-flex-layout-classes.html" />

	<link rel="import" href="../cosmoz-templatehelper-behavior.html" />
	<link rel="import" href="../cosmoz-moneyhelper-behavior.html" />

	<custom-style>
		<style is="custom-style" include="demo-pages-shared-styles iron-flex">
			#container {
				max-width: 800px;
			}
		</style>
	</custom-style>
</head>

<script type="text/javascript" id="demoTemplateHelperSource">
	class DemoTemplateHelper extends Polymer.mixinBehaviors([Cosmoz.TemplateHelperBehavior], Polymer.Element) {
		static get properties() {
			return {
				emptyArray: {
					type: Array,
					value: () => []
				}
			};
		}
		static get template() {
			return Polymer.html`
				<h3>Template helper demo</h3>
				<div>Empty string isEmpty: {{ isEmpty('') }}</div>
				<div>Empty array isEmpty: {{ isEmpty(emptyArray) }}</div>
				<div>concat 'hel', 'lo': {{ concat('hel', 'lo') }}</div>
			`;
		}
	}
	customElements.define('demo-templatehelper', DemoTemplateHelper);
</script>

<script type="text/javascript" id="demoMoneyHelperSource">
	class DemoMoneyHelper extends Polymer.mixinBehaviors([Cosmoz.MoneyHelperBehavior], Polymer.Element) {
		static get properties() {
			return {
				money: {
					type: Number
				},
				renderedNumberAmount: {
					type: String,
					computed: '_computeNumberAmount(money)'
				},
				renderedAmount: {
					type: String,
					computed: '_computeAmount(money)'
				}
			};
		}
		static get template() {
			return Polymer.html`
				<h3>Money helper demo</h3>
				<div><input value="{{ money::keyup }}"/></div>
				<div>renderNumberAmount(money): [[ renderedNumberAmount ]]</div>
				<div>renderAmount(money): [[ renderedAmount ]]</div>
			`;
		}
		_computeNumberAmount(money) {
			return this.renderNumberAmount({
				amount: money,
				currency: 'SEK'
			});
		}
		_computeAmount(money) {
			return this.renderAmount({
				amount: money,
				currency: 'SEK'
			});
		}
	}
	customElements.define('demo-moneyhelper', DemoMoneyHelper);
</script>

<body unresolved>
	<div id="container" class="vertical-section-container centered">
		<h3><code>Cosmoz.TemplateHelperBehavior</code> Demo</h3>
		<demo-snippet>
			<template id="demoTemplateHelperTemplate">
				<demo-templatehelper></demo-templatehelper>
			</template>
		</demo-snippet>

		<h3><code>Cosmoz.MoneyHelperBehavior</code> Demo</h3>
		<demo-snippet>
			<template id="demoMoneyHelperTemplate">
				<demo-moneyhelper></demo-moneyhelper>
			</template>
		</demo-snippet>
	</div>

	<script type="text/javascript">
		(function () {
			const demos = ['Template', 'Money'],
				snippets = document.querySelectorAll('demo-snippet');

			demos.forEach(demo => {
				const source = document.getElementById(`demo${demo}HelperSource`),
					template = document.getElementById(`demo${demo}HelperTemplate`);
				template.innerHTML += `\n\n<script>${source.innerHTML}`;
			});

			Array.prototype.forEach.call(snippets, element => setTimeout(element._updateMarkdown.bind(element), 1));
		})();
	</script>
</body>

</html>